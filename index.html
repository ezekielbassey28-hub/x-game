<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>sweeties‚ù§Ô∏è The Ultimate love</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    * { font-family: 'Inter', sans-serif; }
    h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
    .scrollbar-hide::-webkit-scrollbar { display: none; }
    .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
    body { margin: 0; padding: 0; }
    
    .glass-effect {
      background: rgba(15, 23, 42, 0.7);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(148, 113, 233, 0.3);
    }
    
    .gradient-text {
      background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .btn-gradient {
      background: linear-gradient(135deg, #00d4ff 0%, #0099ff 100%);
      transition: all 0.3s ease;
    }
    
    .btn-gradient:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(0, 212, 255, 0.3);
    }
    
    .card-glow {
      background: linear-gradient(135deg, rgba(0, 212, 255, 0.1) 0%, rgba(168, 85, 247, 0.1) 100%);
      border: 1px solid rgba(0, 212, 255, 0.3);
      box-shadow: 0 0 20px rgba(0, 212, 255, 0.1);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    const firebaseConfig = {
      apiKey: "AIzaSyAw4D4zwUe2Qstk30XLd6eO_duoXDlCp1k",
      authDomain: "xo-game-multiplayer-538e5.firebaseapp.com",
      databaseURL: "https://xo-game-multiplayer-538e5-default-rtdb.firebaseio.com",
      projectId: "xo-game-multiplayer-538e5",
      storageBucket: "xo-game-multiplayer-538e5.firebasestorage.app",
      messagingSenderId: "50264639507",
      appId: "1:50264639507:web:be7d9a2a27096f036517e6"
    };

    let firebaseInitialized = false;
    let database = null;

    const initializeFirebase = () => {
      if (firebaseInitialized) return;
      try {
        if (!window.firebase) return;
        if (window.firebase.apps && window.firebase.apps.length > 0) {
          database = window.firebase.database(window.firebase.apps[0]);
        } else {
          const app = window.firebase.initializeApp(firebaseConfig);
          database = window.firebase.database(app);
        }
        firebaseInitialized = true;
      } catch (e) {
        console.error("Firebase error:", e);
      }
    };

    const THEMES = {
      dark: { bg: 'bg-slate-700', hover: 'hover:bg-slate-600', border: 'border-purple-500' },
      neon: { bg: 'bg-purple-600', hover: 'hover:bg-purple-500', border: 'border-cyan-400' },
      retro: { bg: 'bg-yellow-600', hover: 'hover:bg-yellow-500', border: 'border-red-500' },
      minimal: { bg: 'bg-gray-600', hover: 'hover:bg-gray-500', border: 'border-white' }
    };

    const ACHIEVEMENTS = {
      firstWin: { id: 'firstWin', name: 'üéâ First Victory', desc: 'Win your first game' },
      speedrun: { id: 'speedrun', name: '‚ö° Speed Demon', desc: 'Win in under 20 seconds' },
      perfectGame: { id: 'perfectGame', name: 'üëë Perfect Game', desc: 'Win without opponent scoring' },
      comeback: { id: 'comeback', name: 'üîÑ Clutch Victory', desc: 'Win on last possible move' },
      tenWins: { id: 'tenWins', name: 'üèÜ 10 Wins', desc: 'Reach 10 wins' },
      fiftyWins: { id: 'fiftyWins', name: 'üéñÔ∏è 50 Wins', desc: 'Reach 50 wins' },
      streakFive: { id: 'streakFive', name: 'üî• 5 Streak', desc: 'Win 5 games in a row' },
      timerMaster: { id: 'timerMaster', name: '‚è±Ô∏è Timer Master', desc: 'Win with timer enabled' },
      bigBoard: { id: 'bigBoard', name: 'üî≤ Big Board', desc: 'Win on 4x4 grid' },
      chatty: { id: 'chatty', name: 'üí¨ Chatty', desc: 'Send 10 messages in game' }
    };

    function ArcadeXO() {
      const [gameState, setGameState] = useState('menu');
      const [board, setBoard] = useState(Array(9).fill(null));
      const [isXNext, setIsXNext] = useState(true);
      const [playerNames, setPlayerNames] = useState({ x: 'Player 1', o: 'Player 2' });
      const [nameInputs, setNameInputs] = useState({ x: '', o: '' });
      const [soundEnabled, setSoundEnabled] = useState(true);
      const [gameId, setGameId] = useState('');
      const [playerSymbol, setPlayerSymbol] = useState(null);
      const [roomCode, setRoomCode] = useState('');
      const [gameMode, setGameMode] = useState('3x3');
      const [timeLimit, setTimeLimit] = useState(0);
      const [timeLeft, setTimeLeft] = useState(0);
      const [achievements, setAchievements] = useState([]);
      const [stats, setStats] = useState({ wins: 0, losses: 0, draws: 0 });
      const [matchHistory, setMatchHistory] = useState([]);
      const [chatMessages, setChatMessages] = useState([]);
      const [chatInput, setChatInput] = useState('');
      const [gameStartTime, setGameStartTime] = useState(null);
      const [soundPack, setSoundPack] = useState('beep');
      const [boardTheme, setBoardTheme] = useState('dark');
      const dbRef = useRef(null);
      const timerRef = useRef(null);

      const playSound = (type) => {
        if (!soundEnabled) return;
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          const osc = audioContext.createOscillator();
          const gain = audioContext.createGain();
          osc.connect(gain);
          gain.connect(audioContext.destination);
          if (type === 'move') {
            osc.frequency.value = 400;
            gain.gain.setValueAtTime(0.1, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            osc.start(audioContext.currentTime);
            osc.stop(audioContext.currentTime + 0.1);
          } else if (type === 'win') {
            osc.frequency.value = 600;
            gain.gain.setValueAtTime(0.1, audioContext.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            osc.start(audioContext.currentTime);
            osc.stop(audioContext.currentTime + 0.3);
          }
        } catch (e) {}
      };

      const generateRoomCode = () => Math.random().toString(36).substring(2, 8).toUpperCase();

      const calculateWinner = (squares) => {
        const lines = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];
        for (let line of lines) {
          const [a, b, c] = line;
          if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {
            return { winner: squares[a], line };
          }
        }
        return { winner: null, line: null };
      };

      const createGame = async () => {
        initializeFirebase();
        const newGameId = generateRoomCode();
        setGameId(newGameId);
        setRoomCode(newGameId);
        setPlayerSymbol('X');
        setPlayerNames({ x: nameInputs.x || 'Player 1', o: 'Waiting...' });
        setGameState('waiting');
        setChatMessages([]);
        setGameStartTime(Date.now());

        if (database) {
          try {
            const gameRef = database.ref(`games/${newGameId}`);
            await gameRef.set({
              board: Array(9).fill(''),
              turn: 'X',
              player_x: nameInputs.x || 'Player 1',
              player_o: null,
              status: 'waiting',
              created_at: new Date().getTime(),
              messages: []
            });

            gameRef.on('value', (snapshot) => {
              const data = snapshot.val();
              if (data) {
                const cleanBoard = (data.board || Array(9).fill('')).map(cell => cell === '' ? null : cell);
                setBoard(cleanBoard);
                setIsXNext(data.turn === 'X');
                if (data.player_o && data.player_o !== 'Waiting...') {
                  setPlayerNames({ x: data.player_x, o: data.player_o });
                  setTimeout(() => setGameState('playing'), 500);
                }
                if (data.messages) setChatMessages(data.messages);
                if (data.winner) endGame(data.winner);
              }
            });

            dbRef.current = gameRef;
          } catch (error) {
            alert('Error: ' + error.message);
          }
        }
      };

      const joinGame = async () => {
        initializeFirebase();
        if (roomCode.length !== 6 || !database) return;

        try {
          const gameRef = database.ref(`games/${roomCode}`);
          const snapshot = await gameRef.once('value');
          
          if (snapshot.exists()) {
            const data = snapshot.val();
            if (!data.player_o) {
              setGameId(roomCode);
              setPlayerSymbol('O');
              setPlayerNames({ x: data.player_x, o: nameInputs.o || 'Player 2' });
              const cleanBoard = (data.board || Array(9).fill('')).map(cell => cell === '' ? null : cell);
              setBoard(cleanBoard);
              setGameMode(data.gameMode || '3x3');
              setTimeLimit(data.timeLimit || 0);
              setGameState('playing');
              setChatMessages(data.messages || []);
              setGameStartTime(Date.now());

              await gameRef.update({
                player_o: nameInputs.o || 'Player 2',
                status: 'playing'
              });

              gameRef.on('value', (snapshot) => {
                const updatedData = snapshot.val();
                if (updatedData) {
                  const cleanBoard = (updatedData.board || Array(9).fill('')).map(cell => cell === '' ? null : cell);
                  setBoard(cleanBoard);
                  setIsXNext(updatedData.turn === 'X');
                  if (updatedData.messages) setChatMessages(updatedData.messages);
                  if (updatedData.winner) endGame(updatedData.winner);
                }
              });

              dbRef.current = gameRef;
            } else {
              alert('Room is full!');
            }
          } else {
            alert('Room not found!');
          }
        } catch (error) {
          alert('Error: ' + error.message);
        }
      };

      const makeMove = async (index) => {
        if (board[index] || gameState !== 'playing') return;
        const isYourTurn = (playerSymbol === 'X' && isXNext) || (playerSymbol === 'O' && !isXNext);
        if (!isYourTurn) return;

        const newBoard = Array(9).fill(null);
        for (let i = 0; i < board.length; i++) {
          newBoard[i] = board[i] === null ? null : board[i];
        }
        newBoard[index] = playerSymbol;
        playSound('move');

        const { winner } = calculateWinner(newBoard);
        const cleanBoard = newBoard.map(cell => cell === null ? '' : cell);

        if (database && dbRef.current) {
          try {
            await dbRef.current.update({
              board: cleanBoard,
              turn: playerSymbol === 'X' ? 'O' : 'X',
              winner: winner || (newBoard.every(c => c) ? 'Draw' : null)
            });
          } catch (error) {
            console.error('Error:', error);
          }
        }
      };

      const sendMessage = async () => {
        if (!chatInput.trim()) return;
        const newMessages = [...chatMessages, { player: playerNames[playerSymbol.toLowerCase()], text: chatInput }];
        setChatMessages(newMessages);
        setChatInput('');

        if (database && dbRef.current) {
          try {
            await dbRef.current.update({ messages: newMessages });
          } catch (error) {
            console.error('Error:', error);
          }
        }
      };

      const endGame = (winner) => {
        setGameState('ended');
        playSound('win');
        if (winner === 'Draw') {
          setStats(s => ({ ...s, draws: s.draws + 1 }));
        } else if (winner === playerSymbol) {
          setStats(s => ({ ...s, wins: s.wins + 1 }));
        } else {
          setStats(s => ({ ...s, losses: s.losses + 1 }));
        }
      };

      const playAgain = async () => {
        setBoard(Array(9).fill(null));
        setIsXNext(true);
        setGameState('playing');
        setChatMessages([]);
        setGameStartTime(Date.now());

        if (database && dbRef.current) {
          try {
            await dbRef.current.update({
              board: Array(9).fill(''),
              turn: 'X',
              winner: null,
              messages: []
            });
          } catch (error) {
            console.error('Error:', error);
          }
        }
      };

      const backToMenu = () => {
        setGameState('menu');
        setBoard(Array(9).fill(null));
        setPlayerSymbol(null);
        setGameId('');
        setRoomCode('');
        setChatMessages([]);
        if (dbRef.current) dbRef.current.off();
      };

      const copyCode = () => {
        navigator.clipboard.writeText(roomCode);
        alert('Room code copied!');
      };

      const { winner: gameWinner } = calculateWinner(board);
      const isBoardFull = board.every(c => c !== null);
      const gameOver = gameWinner || isBoardFull;

      useEffect(() => {
        if (gameState === 'playing' && timeLimit > 0) {
          if (timeLeft === 0) setTimeLeft(timeLimit);
          timerRef.current = setTimeout(() => {
            setTimeLeft(t => t > 0 ? t - 1 : timeLimit);
          }, 1000);
        }
        return () => clearTimeout(timerRef.current);
      }, [timeLeft, gameState, timeLimit]);

      const themeColors = THEMES[boardTheme] || THEMES.dark;

      return (
        <div className="w-full min-h-screen flex flex-col items-center justify-center gap-6 p-4 bg-gradient-to-br from-slate-950 via-purple-950 to-slate-950 text-white">
          {gameState === 'menu' && (
            <div className="text-center max-w-2xl max-h-[90vh] overflow-y-auto scrollbar-hide">
              <div className="mb-8">
                <h1 className="text-7xl font-black mb-3 tracking-tighter gradient-text">Sweeties‚ù§Ô∏è</h1>
                <p className="text-xl font-light text-cyan-300/80 tracking-wide">The Ultimate love</p>
              </div>

              <div className="space-y-4 mb-10 max-w-md mx-auto">
                <div className="glass-effect p-4 rounded-xl">
                  <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">Your Name</label>
                  <input type="text" placeholder="Enter your name" value={nameInputs.x} onChange={(e) => setNameInputs({ ...nameInputs, x: e.target.value })} className="w-full px-4 py-3 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-400 transition" />
                </div>
                
                <div className="glass-effect p-4 rounded-xl">
                  <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">Game Mode</label>
                  <select value={gameMode} onChange={(e) => setGameMode(e.target.value)} className="w-full px-4 py-3 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white focus:outline-none focus:border-cyan-400 transition">
                    <option value="3x3">3√ó3 Classic</option>
                    <option value="4x4">4√ó4 Big Board</option>
                  </select>
                </div>

                <div className="glass-effect p-4 rounded-xl">
                  <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">‚è±Ô∏è Time Limit</label>
                  <select value={timeLimit} onChange={(e) => setTimeLimit(parseInt(e.target.value))} className="w-full px-4 py-3 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white focus:outline-none focus:border-cyan-400 transition">
                    <option value={0}>No Time Limit</option>
                    <option value={10}>10 Seconds</option>
                    <option value={20}>20 Seconds</option>
                    <option value={30}>30 Seconds</option>
                  </select>
                </div>

                <div className="grid grid-cols-2 gap-3">
                  <div className="glass-effect p-4 rounded-xl">
                    <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">Board Theme</label>
                    <select value={boardTheme} onChange={(e) => setBoardTheme(e.target.value)} className="w-full px-3 py-2 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white focus:outline-none focus:border-cyan-400 transition text-sm">
                      <option value="dark">Dark</option>
                      <option value="neon">Neon</option>
                      <option value="retro">Retro</option>
                      <option value="minimal">Minimal</option>
                    </select>
                  </div>
                  <div className="glass-effect p-4 rounded-xl">
                    <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">üîä Sound</label>
                    <select value={soundPack} onChange={(e) => setSoundPack(e.target.value)} className="w-full px-3 py-2 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white focus:outline-none focus:border-cyan-400 transition text-sm">
                      <option value="beep">Beep</option>
                      <option value="chime">Chime</option>
                    </select>
                  </div>
                </div>

                <button onClick={createGame} className="btn-gradient w-full px-6 py-4 text-black font-bold text-lg rounded-xl transition duration-300 uppercase tracking-wide">
                  ‚ûï Create Room
                </button>

                <div className="relative my-6">
                  <div className="absolute inset-0 flex items-center">
                    <div className="w-full border-t border-cyan-500/20"></div>
                  </div>
                  <div className="relative flex justify-center text-sm">
                    <span className="px-4 bg-slate-950 text-gray-400 uppercase tracking-widest text-xs font-semibold">Or Join</span>
                  </div>
                </div>

                <div className="glass-effect p-4 rounded-xl">
                  <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">Room Code</label>
                  <input type="text" placeholder="000000" value={roomCode} onChange={(e) => setRoomCode(e.target.value.toUpperCase())} maxLength="6" className="w-full px-4 py-3 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white text-center text-3xl font-black tracking-widest focus:outline-none focus:border-cyan-400 transition" />
                </div>

                <div className="glass-effect p-4 rounded-xl">
                  <label className="block text-xs font-semibold text-cyan-300 mb-2 uppercase tracking-widest">Your Name</label>
                  <input type="text" placeholder="Enter your name" value={nameInputs.o} onChange={(e) => setNameInputs({ ...nameInputs, o: e.target.value })} className="w-full px-4 py-3 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-cyan-400 transition" />
                </div>

                <button onClick={joinGame} className="w-full px-6 py-4 bg-gradient-to-r from-pink-500 to-purple-600 text-white font-bold text-lg rounded-xl transition duration-300 hover:shadow-lg hover:shadow-pink-500/50 uppercase tracking-wide">
                  üîó Join Room
                </button>
              </div>

              <div className="grid grid-cols-3 gap-4 max-w-md mx-auto mb-8">
                <div className="card-glow p-4 rounded-xl text-center">
                  <p className="text-3xl font-black gradient-text">{stats.wins}</p>
                  <p className="text-xs text-gray-400 uppercase tracking-widest mt-2">Wins</p>
                </div>
                <div className="card-glow p-4 rounded-xl text-center">
                  <p className="text-3xl font-black text-purple-400">{stats.losses}</p>
                  <p className="text-xs text-gray-400 uppercase tracking-widest mt-2">Losses</p>
                </div>
                <div className="card-glow p-4 rounded-xl text-center">
                  <p className="text-3xl font-black text-amber-400">{stats.draws}</p>
                  <p className="text-xs text-gray-400 uppercase tracking-widest mt-2">Draws</p>
                </div>
              </div>

              <div className="max-w-md mx-auto mb-8">
                <h3 className="text-lg font-black gradient-text mb-3 uppercase tracking-widest">üéñÔ∏è Achievements</h3>
                <div className="grid grid-cols-2 gap-2">
                  {Object.values(ACHIEVEMENTS).map((ach) => (
                    <div key={ach.id} className={`p-3 rounded-lg text-xs text-center transition ${achievements.includes(ach.id) ? 'card-glow bg-cyan-500/20' : 'bg-slate-800/50 opacity-50'}`} title={ach.desc}>
                      <p className="font-bold">{ach.name}</p>
                    </div>
                  ))}
                </div>
              </div>

              <div className="max-w-md mx-auto">
                <h3 className="text-lg font-black text-purple-400 mb-3 uppercase tracking-widest">üìú Match History</h3>
                <div className="glass-effect p-4 rounded-xl max-h-32 overflow-y-auto text-xs">
                  {matchHistory.length === 0 ? (
                    <p className="text-gray-500">No matches yet</p>
                  ) : (
                    matchHistory.map((m, i) => (
                      <div key={i} className="mb-2 pb-2 border-b border-purple-500/30">
                        <span className={`font-bold ${m.result === 'Won' ? 'text-cyan-400' : m.result === 'Lost' ? 'text-red-400' : 'text-amber-400'}`}>{m.result}</span>
                        <span className="text-gray-400"> vs {m.opponent}</span>
                      </div>
                    ))
                  )}
                </div>
              </div>
            </div>
          )}

          {gameState === 'waiting' && (
            <div className="text-center max-w-md">
              <h1 className="text-5xl font-black mb-8 gradient-text">ROOM CREATED</h1>
              <div className="card-glow border-2 border-cyan-400 p-8 rounded-2xl mb-8">
                <p className="text-xs font-semibold text-gray-400 mb-3 uppercase tracking-widest">Your Room Code</p>
                <p className="text-6xl font-black text-cyan-400 mb-6 tracking-[0.2em] font-mono">{roomCode}</p>
                <button onClick={copyCode} className="btn-gradient w-full px-4 py-3 text-black font-bold rounded-lg text-sm uppercase tracking-wide">üìã Copy Code</button>
              </div>
              <p className="text-lg text-gray-300 mb-6">Share this code with your friend!</p>
              <div className="flex justify-center gap-2 mb-8">
                <div className="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></div>
                <div className="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></div>
                <div className="w-2 h-2 bg-cyan-400 rounded-full animate-pulse"></div>
              </div>
              <p className="text-sm text-gray-500 mb-6">Waiting for opponent...</p>
              <button onClick={backToMenu} className="px-6 py-3 bg-red-500/20 border border-red-500/50 text-red-400 font-bold rounded-lg text-sm uppercase tracking-wide hover:bg-red-500/30 transition">Cancel</button>
            </div>
          )}

          {(gameState === 'playing' || gameState === 'ended') && (
            <div className="flex flex-col items-center gap-6 w-full max-w-4xl">
              <div className="w-full flex justify-between items-center max-w-md">
                <h1 className="text-4xl font-black gradient-text">X vs O</h1>
                <button onClick={backToMenu} className="px-4 py-2 bg-red-500/20 border border-red-500/50 text-red-400 font-bold rounded-lg text-sm uppercase tracking-wide hover:bg-red-500/30 transition">üè† Menu</button>
              </div>

              <div className="grid grid-cols-2 gap-4 w-full max-w-md">
                <div className="card-glow p-4 rounded-xl text-center">
                  <p className="text-xs text-gray-400 uppercase tracking-widest">You</p>
                  <p className="text-lg font-bold gradient-text mt-2">{playerSymbol === 'X' ? playerNames.x : playerNames.o}</p>
                  <p className="text-2xl font-black text-cyan-400 mt-1">{playerSymbol}</p>
                </div>
                <div className="card-glow p-4 rounded-xl text-center">
                  <p className="text-xs text-gray-400 uppercase tracking-widest">Opponent</p>
                  <p className="text-lg font-bold text-purple-400 mt-2">{playerSymbol === 'X' ? playerNames.o : playerNames.x}</p>
                  <p className="text-2xl font-black text-pink-400 mt-1">{playerSymbol === 'X' ? 'O' : 'X'}</p>
                </div>
              </div>

              {!gameOver && (
                <div className="card-glow p-4 rounded-xl w-full max-w-md text-center">
                  <p className="text-sm text-gray-400 uppercase tracking-widest mb-2">Current Turn</p>
                  <p className="text-2xl font-black gradient-text">{isXNext ? playerNames.x : playerNames.o}</p>
                  {timeLimit > 0 && <p className="text-lg font-bold text-amber-400 mt-2">‚è±Ô∏è {timeLeft}s</p>}
                </div>
              )}

              <div className={`grid gap-3 p-6 bg-slate-900/50 border border-cyan-500/30 rounded-2xl ${gameMode === '3x3' ? 'grid-cols-3' : 'grid-cols-4'}`}>
                {board.map((cell, i) => (
                  <button key={i} onClick={() => makeMove(i)} className={`w-16 h-16 border-2 text-3xl font-black transition transform hover:scale-110 active:scale-95 rounded-lg ${themeColors.bg} ${themeColors.hover} ${themeColors.border} hover:shadow-lg`}>
                    <span className={cell === 'X' ? 'text-cyan-400' : cell === 'O' ? 'text-pink-400' : ''}>{cell}</span>
                  </button>
                ))}
              </div>

              {gameOver && (
                <div className="text-center w-full max-w-md">
                  <div className="mb-6">
                    <p className="text-5xl font-black mb-3">
                      {gameWinner ? (gameWinner === playerSymbol ? 'üéâ' : 'üò¢') : 'ü§ù'}
                    </p>
                    <p className="text-3xl font-black gradient-text">
                      {gameWinner ? (gameWinner === playerSymbol ? 'YOU WIN!' : 'YOU LOST') : 'DRAW!'}
                    </p>
                  </div>
                  <div className="space-y-2">
                    <button onClick={playAgain} className="btn-gradient w-full px-6 py-3 text-black font-bold rounded-lg text-sm uppercase tracking-wide">‚ñ∂Ô∏è Play Again</button>
                    <button onClick={backToMenu} className="w-full px-6 py-3 bg-red-500/20 border border-red-500/50 text-red-400 font-bold rounded-lg text-sm uppercase tracking-wide hover:bg-red-500/30 transition">üè† Back to Menu</button>
                  </div>
                </div>
              )}

              <div className="w-full max-w-md glass-effect p-4 rounded-xl">
                <h3 className="text-sm font-bold text-cyan-300 mb-3 uppercase tracking-widest">üí¨ Chat</h3>
                <div className="bg-slate-950/50 p-3 rounded-lg h-24 overflow-y-auto text-xs mb-3 border border-cyan-500/20">
                  {chatMessages.map((msg, i) => (
                    <p key={i} className="mb-1">
                      <span className="text-cyan-400 font-bold">{msg.player}:</span>
                      <span className="text-gray-300 ml-2">{msg.text}</span>
                    </p>
                  ))}
                </div>
                <div className="flex gap-2">
                  <input type="text" placeholder="Type message..." value={chatInput} onChange={(e) => setChatInput(e.target.value)} onKeyPress={(e) => e.key === 'Enter' && sendMessage()} className="flex-1 px-3 py-2 bg-slate-800/50 border border-cyan-500/30 rounded-lg text-xs text-white focus:outline-none focus:border-cyan-400 transition" />
                  <button onClick={sendMessage} className="px-3 py-2 bg-cyan-500/30 border border-cyan-500/50 text-cyan-400 font-bold rounded-lg text-xs hover:bg-cyan-500/50 transition uppercase">Send</button>
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<ArcadeXO />);
  </script>
</body>
</html>
